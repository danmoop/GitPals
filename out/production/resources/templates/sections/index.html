<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Gitpals - find team for cooperative development</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>
    <link rel="shortcut icon" type="image/x-icon" href="images/github.png"/>
    <link rel="stylesheet" href="css/flat-ui.css" />
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
    <nav class="navbar navbar-inverse navbar-lg navigation" role="navigation">
        <div>
            <a href="/about" class="btn btn-info"><b class="wh">About</b></a>
            <a href="/login" th:if="${GithubUserName == null}" class="btn btn-primary"><b class="wh">Login using Github</b></a>
            <a href="/dashboard" th:if="${GithubUserName != null}" class="btn btn-primary"><b class="wh">Dashboard</b></a>
            <a href="/messages" th:if="${GithubUserName != null}" class="btn btn-info" th:inline="text" id="msgBtn"><b class="wh">Messages: [[${#lists.size(userDB.messages)}]]</b></a>
            <a href="/logout" th:if="${GithubUserName != null}" class="btn btn-danger"><b>Log Out</b></a>
        </div>
        <div class="center">
            <h6 class="wh" th:if="${GithubUserName == null}" id="centerDiv"><b>Hello, Guest</b></h6>
            <div class="row" id="centerDiv2">
                <h6 class="wh" th:if="${GithubUserName != null}" th:inline="text">Hello, <b><a class="wh" target="_blank" href="/dashboard">[[${GithubUserName}]]</a></b> <img style="margin-left: 10px;" th:src="${GithubUser.userAuthentication.details.avatar_url}" width="64" height="64"/></h6>
                <a href="/messages" class="wh b" th:if="${GithubUser != null}" style="transform: translate(20%, 15%); font-size: 20px;" th:inline="text">Messages: [[${#lists.size(userDB.messages)}]]</a>
            </div>
        </div>
        <div class="push-right">
            <div class="container">
                <a href="/search" class="btn btn-info"><b>Search</b></a>
            </div>
        </div>
    </nav>

    <section class="center-content text-center">
        <a href="/"><h1 class="wh"><img width="150" height="150" src="images/github.png"/>GitPals</h1></a>
        <div class="container">
            <h3 class="wh">Find a team for development and become a better developer while contributing and working together!</h3>
            <h6 class="wh b">Choose any project your requirements match and start your path in cooperative development</h6>
            <a href="/donate" id="donateBtn" class="btn btn-primary b">Donate</a>
            <hr class="divider"/>
            <h6 class="wh b" th:inline="text">Total projects for apply: [[${#lists.size(allTheProjects)}]]</h6>

            <button class="btn btn-info b" onclick="showSortForm();" th:if="${GithubUser != null}">Sort projects</button>

            <br/>
            <br/>

            <div id="sortList" style="display: none;" th:if="${GithubUser != null}">
                <form th:action="@{/sortProjects}" method="post">
                    <div th:each="tech: ${projectTechs}">
                        <input class="largeCheckbox" type="checkbox" th:name="sort_projects" th:value="${tech.key}" th:checked="${tech.value}"/><span class="wh" th:text="${tech.key}"></span>
                    </div>

                    <br/>
                    <button class="btn btn-info b">Sort</button>
                </form>

                <hr class="divider"/>
            </div>

        </div>

        <ul class="pr-list text-center" th:if="${GithubUser != null}">
            <a th:each="project: ${allTheProjects}" th:href="${'/projects/' + project.title}">
                <li class="pr-item">
                    <header><h6 class="wh pr-title"><b th:inline="text">[[${project.title}]]</b></h6></header>
                    <a class="b" th:href="${'/users/' + project.authorName}" target="_blank" th:inline="text">[[${project.authorName}]]</a>
                    <p class="wh" th:inline="text" style="margin: 10px;"><b>[[${project.requirements}]]</b></p>
                </li>
            </a>

            <h6 class="wh" th:if="${#lists.size(allTheProjects) == 0}" style="margin-right: 2.5%;"> No projects published yet</h6>
        </ul>

        <div th:if="${GithubUser == null}">
            <h4 style="color: white;"><a href="/login">Login in</a> to view available projects</h4>
        </div>

    </section>

    <script src="./js/index.js"></script>
    <script src="./js/jquery.js"></script>

</body>
</html>